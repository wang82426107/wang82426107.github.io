<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>éªšæ ‹ã®åšå®¢</title>
  <meta name="author" content="ç¥ç»éªšæ ‹">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="éªšæ ‹ã®åšå®¢"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="éªšæ ‹ã®åšå®¢" type="application/atom+xml">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
<link rel="stylesheet" href="/css/style.css">
  <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-368771XX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class='normal_mode'>
    <nav id="main-nav">
  <ul class='container'>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
  </header>
  <div id="content" class="container">
    <div id="cover">
	<div id="profile" alt="http://ww1.sinaimg.cn/large/6cea169fjw1edgyzma1xcj21kw16ohba.jpg">
		<a href="/">
			<div class="logo">
				<img src="/logo.png" alt="Profile Picture">
			</div>
			<div id="title">éªšæ ‹ã®åšå®¢</div>
		</a>

		
		 <ul class="my-socials">
  
  <li>
  	<a href="https://github.com/your_id" class="github" target="_blank">
  		<i class="fa fa-github"></i>
  	</a>
  </li>
  
  <li>
  	<a href="http://weibo.com/your_id" class="weibo" target="_blank">
  		<i class="fa fa-weibo"></i>
  	</a>
  </li>
  
 
</ul>
	</div>
</div>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2016-03-07T09:16:47.000Z"><a href="/2016/03/07/åå±±è®ºå‰‘ä¹‹Apple Pay/">é€±ä¸€, 3æœˆ 7 2016, 5:16:47 ä¸‹åˆ</a></time>

  
    <h1 class="title"><a href="/2016/03/07/åå±±è®ºå‰‘ä¹‹Apple Pay/">åå±±è®ºå‰‘ä¹‹Apple Pay</a></h1>
  



<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <blockquote>
<p>####å¦‚æœä½ æ¨ä»–,å°±è®©ä»–èˆ”é—¨å£çš„æ£’æ£’ç³– â€”â€”â€”-å†›å“¥</p>
</blockquote>
<hr>
<p>#####åœ¨å‘å¸ƒè¿‘ä¸¤å¹´ã€å†ç»å„ç§å‘¨æŠ˜ä¹‹åï¼Œè‹¹æœå…¬å¸çš„Apple Payç§»åŠ¨æ”¯ä»˜æœåŠ¡ç»ˆäºåœ¨2016å¹´2æœˆ18æ—¥æ¥åˆ°äº†ä¸­å›½å¤§é™†.å¯¹ä¸­å›½ç”¨æˆ·æ¥è¯´ï¼Œç§»åŠ¨æ”¯ä»˜å…¶å®å·²ç»ä¸æ˜¯ä»€ä¹ˆé™Œç”Ÿäº‹ç‰©ï¼ŒæŠ¢çº¢åŒ…å’Œæ”¯ä»˜å®æ—©å®Œæˆç”¨æˆ·å¯è’™ã€‚ä½†ä¸è¿™ä¸¤è€…æœ‰åŒºåˆ«çš„æ˜¯ï¼ŒApple Payåªæ˜¯è‹¹æœæ­å»ºçš„ä¸€ä¸ªæ”¯ä»˜æœåŠ¡ï¼Œå®ƒé“¾æ¥é“¶è¡Œã€åº—é¢åŠç”¨æˆ·ï¼Œä½†åˆä¸åƒæ”¯ä»˜å®é‚£æ ·æŠŠé’±å­˜åœ¨è‡ªå·±è¿™ã€‚</p>
<p>#####å¯¹äºæŠ€æœ¯äººå‘˜çš„æˆ‘ä»¬,ä¸ç®¡å…¶å¸‚åœºå¦‚ä½•,å½“æˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªæ–°çš„æŠ€æœ¯çš„æ—¶å€™,æˆ‘ä»¬å°±åº”è¯¥æƒ³ç€å¦‚ä½•å»ä½¿ç”¨å®ƒ,ä»Šå¤©ä½œä¸ºå‰ç«¯å¼€å‘è€…çš„æˆ‘å°±å¯¹ApplePayè¿›è¡Œä¸€ä¸ªç®€å•çš„è®²è§£.<br><br></p>
<p>###å•†ä¸šè¯ä¹¦çš„é…ç½®<br></p>
<p>#####å½“æˆ‘ä»¬ä½¿ç”¨åˆ°ApplePayçš„æ—¶å€™,é¦–å…ˆå°±æ˜¯è¦åˆ°æˆ‘ä»¬çš„å¼€å‘è€…ä¸­å¿ƒé…ç½®ä¸€ä¸ªè¯ä¹¦,è¿™ä¸ªè¯ä¹¦å°±å«åšå•†ä¸šè¯ä¹¦,ä¸‹é¢æˆ‘ä»¬å°±çœ‹ä¸€ä¸‹å•†ä¸šè¯ä¹¦é…ç½®çš„ç›¸å…³é—®é¢˜å§.</p>
<p>#####é¦–ç›¸æˆ‘ä»¬è¿›å…¥åˆ°æˆ‘ä»¬è¯ä¹¦é¡µé¢,å½“æˆ‘ä»¬è¿›å…¥æˆ‘ä»¬çš„è¯ä¹¦é¡µé¢ä¹‹å,é¦–å…ˆæˆ‘ä»¬éœ€è¦å¦‚å›¾æ·»åŠ ä¸€ä¸ªå•†ä¸šè¯ä¹¦.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-cc4d3625df18ee16.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####è¿›å…¥åˆ°ä¸‹é¢çš„é¡µé¢çš„æ—¶å€™,æˆ‘ä»¬è¦å¡«å†™æˆ‘ä»¬çš„ç±»å‹åç§°ä»¥åŠæˆ‘ä»¬çš„ID,æ ¹æ®è¦æ±‚å¡«å†™å³å¯.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-44c5a0583b5fbd5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å®Œæˆä¹‹åç‚¹å‡»ä¸€ä¸‹,è¿›å…¥å¦‚ä¸‹çš„é¡µé¢<br><img src="http://upload-images.jianshu.io/upload_images/1396375-51e948dd0fa5e3a1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å½“ç„¶äº†è¿™æ ·æˆ‘ä»¬å¹¶æ²¡æœ‰é…ç½®å®Œæˆ.ç‚¹å‡»register æ³¨å†Œ,ç„¶åè¿”å›åˆ°ä¸Šä¸€é¡µé¢.å¦‚å›¾ æ‰¾åˆ°æˆ‘ä»¬æ‰€é…ç½®çš„æ–‡ä»¶.ç„¶åæˆ‘ä»¬å°±è¦å¯¹æˆ‘ä»¬çš„è¯ä¹¦è¿›è¡Œè¿›ä¸€æ­¥çš„é…ç½®ğŸ˜,<br><img src="http://upload-images.jianshu.io/upload_images/1396375-6642aac5f65deccd.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####ç‚¹å‡»Editè¿›å…¥è¯¦æƒ…é¡µé¢<br><img src="http://upload-images.jianshu.io/upload_images/1396375-c92b49d4751bf8ad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####ä¸è§£é‡Š,ç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥å°±å¯.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-15ec1cab657fd7b5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####ç‚¹å‡»ä¸‹ä¸€æ­¥ä¹‹åæˆ‘ä»¬è¿›å…¥å¦‚ä¸‹çš„é¡µé¢,è¿™æ—¶å€™è·Ÿæˆ‘ä»¬é…ç½®è¯ä¹¦ä¸€ä¸ª,æˆ‘ä»¬éœ€è¦ä»é’¥åŒ™ä¸²ä¸­é…ç½®ä¸€ä¸ªç”³è¯·æ–‡ä»¶å‡ºæ¥.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-995d1870f7ae1af9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####é¦–å…ˆå…ˆæ‰“å¼€æˆ‘ä»¬çš„é’¥åŒ™ä¸²ğŸ”‘,å¦‚ä¸‹å›¾è¿›è¡Œä¸‹ä¸€æ­¥.ç‚¹å‡»â€è¯ä¹¦åŠ©ç†â€,ç„¶åç‚¹å‡» â€œä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è€Œè¯ä¹¦â€.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-c91c8cb401a32f1a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####ç„¶åè¿›è¡Œå¦‚ä¸‹å›¾çš„çš„æ“ä½œ,ç”µå­é‚®ç®±å¯ä»¥å¡«å†™çš„ç¨å¾®éšæ„ä¸€ç‚¹,ğŸ˜ƒ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-2cf92d87cd20dcf8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å¡«å†™å®Œæ•´ä¹‹å,æˆ‘ä»¬ç‚¹å‡»ç»§ç»­å³å¯,ç„¶åæˆ‘ä»¬å°±éœ€è¦ä¸Šä¼ æˆ‘ä»¬çš„è¯ä¹¦è¯·æ±‚æ–‡ä»¶äº†.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-183d2adb2e4b634e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å®Œæˆä¹‹å,å°±ç‚¹å‡»ä¸‹è½½æˆ‘ä»¬çš„å•†ä¸šè¯ä¹¦å°±è¡Œ.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-adb799b103718ecf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####è¯ä¹¦é…ç½®å®Œäº†,å°±è¦é…ç½®æˆ‘ä»¬App ID å’Œ å·¥ç¨‹çš„æè¿°æ–‡ä»¶.æˆ‘ä»¬é¦–å…ˆé…ç½®ä¸€ä¸‹App ID,App IDçš„é…ç½®å’Œå‰é¢çš„å·®ä¸å¤š,å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯æˆ‘ä»¬éœ€è¦å‹¾é€‰Apply PayåŠŸèƒ½. å¦‚å›¾æ‰€ç¤º<br><img src="http://upload-images.jianshu.io/upload_images/1396375-9996ce478e8f559c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å½“æˆ‘ä»¬ç‚¹å‡»ä¸‹ä¸€æ­¥çš„æ—¶å€™,å‘ç°Apply Pay çš„çŠ¶æ€æ˜¯é»„è‰²çš„,æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦æŠŠä»–å˜æˆå¯ç”¨çŠ¶æ€.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-5264de08fed22d62.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####æˆ‘ä»¬ç‚¹å‡»Regiseræ³¨å†Œå®Œæˆä¹‹å,å°±åœ¨æˆ‘ä»¬çš„APP IDåˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„APP IDä¿¡æ¯.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-21fb2c34caec1ad1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å¦‚å›¾,æ‰¾åˆ°å¯¹åº”çš„Apply Pay ä¿¡æ¯</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-361c8467e728a8c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####è¿›å…¥é€‰æ‹©è¯ä¹¦çš„é¡µé¢,é€‰æ‹©æˆ‘ä»¬çš„è¯ä¹¦.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-f03b55bc7ddc9b86.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####çœ‹å®Œä¸‹é¢ä¸‰å¼ å›¾  æˆ‘ä»¬çš„App ID  çš„é…ç½®å°±å®Œæˆäº†.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-4ff8c9d3aa7a711c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-93c27251f64eeb36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-6f7c25271b2377e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<hr>
<p></p>
<p>#æè¿°æ–‡ä»¶</p>
<hr>
<p>####ä¸Šé¢çš„App ID  æˆ‘ä»¬å·²ç»é…ç½®å®Œæˆäº†,ä¸‹é¢æˆ‘ä»¬å°±é…ç½®æˆ‘ä»¬çš„ æè¿°æ–‡ä»¶.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-144a5f326cd08cf0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####é€‰æ‹©å¯¹åº”çš„ID<br><img src="http://upload-images.jianshu.io/upload_images/1396375-12542bc5025e674c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å®Œæˆä¹‹åä¸‹è½½æˆ‘ä»¬çš„æè¿°æ–‡ä»¶å°±è¡Œ.<br><img src="http://upload-images.jianshu.io/upload_images/1396375-ed82ebb0d938090d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<blockquote>
<p>###æ³¨æ„:è¿™é‡Œæœ‰ä¸ªé—®é¢˜æ˜¯å…³äºè¯ä¹¦çš„,å°±æ˜¯æˆ‘ä»¬çš„è¯ä¹¦ä¸ç®¡æ€ä¹ˆä¸‹è½½éƒ½ä¼šæ˜¾ç¤ºçš„çŠ¶æ€æ˜¯è¯ä¹¦æ˜¯æ— æ•ˆçš„æˆ–è€…è¯ä¹¦æ˜¯æœªçŸ¥æœºæ„é¢å‘çš„. æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å»ç½‘ä¸Šä¸‹ä¸¤ä¸ªè¯ä¹¦. å¦‚å›¾æ‰€ç¤º</p>
</blockquote>
<hr>
<p>####<a href="http://www.apple.com/certificateauthority/" target="_blank" rel="external">â€”-&gt;ç‚¹å‡»å‰å¾€è¯ä¹¦ä¸‹è½½é¡µé¢</a></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-a8689aaf100166b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<hr>
<p><br></p>
<p>##å·¥ç¨‹é…ç½®</p>
<p>####å½“æˆ‘ä»¬å®Œæˆäº†æˆ‘ä»¬çš„è¯ä¹¦çš„é…ç½®ä¹‹å,æˆ‘ä»¬å°±éœ€è¦åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ä¸­é…ç½®æˆ‘ä»¬çš„Apple Payäº†,é¦–å…ˆå°±è¦å…ˆæŸ¥çœ‹æˆ‘ä»¬çš„ID.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-a84110d4870bc14a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####IDæŸ¥çœ‹å®Œæˆä¹‹åå°±é…ç½®æˆ‘ä»¬çš„Apply Pay ç›¸å…³çš„ä¿¡æ¯.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-b276bb7cf9274656.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>####å½“ç„¶äº†,æˆ‘ä»¬è¿˜æ˜¯è¦é…ç½®æˆ‘ä»¬çš„å•†ä¸šè¯ä¹¦å’Œæè¿°æ–‡ä»¶çš„</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-c1d3363c74b78385.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<hr>
<p><br></p>
<p>#ä»£ç éƒ¨åˆ†</p>
<hr>
<p>####å½“æˆ‘ä»¬çš„ä¸Šé¢ä¸¤ä¸ªæ•´å®Œä¹‹å,æˆ‘ä»¬å°±è¦å¼€å§‹æˆ‘ä»¬çš„ä»£ç éƒ¨åˆ†äº†.å› ä¸ºæ˜¯æµ‹è¯•,æ‰€ä»¥æˆ‘å°±ç®€å•çš„ç”¨storyboardåšä¸€ä¸‹.ä»£ç å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#import &quot;ViewController.h&quot;</span><br><span class="line"></span><br><span class="line">//æˆ‘ä»¬è¦ä½¿ç”¨Apple Pay é¦–å…ˆè¦å…ˆå¯¼å…¥ä¸¤ä¸ªåº“</span><br><span class="line">#import &lt;PassKit/PassKit.h&gt;</span><br><span class="line"></span><br><span class="line">#import &lt;AddressBook/AddressBook.h&gt;</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œè¦éµå®ˆä¸€ä¸ªåè®®.</span><br><span class="line">@interface ViewController ()&lt;PKPaymentAuthorizationViewControllerDelegate&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œæˆ‘ä½¿ç”¨storyboardç”¨ä¸€ä¸ªæŒ‰é’®æ‹–æˆä¸€ä¸ªäº‹ä»¶</span><br><span class="line">- (IBAction)payAction:(id)sender &#123;</span><br><span class="line">    </span><br><span class="line">    //é¦–å…ˆæˆ‘ä»¬è¦å…ˆç¡®å®šè®¾å¤‡æ˜¯å¦æ”¯æŒApple PayåŠŸèƒ½,ç°åœ¨æ”¯æŒApple PayåŠŸèƒ½åŠŸèƒ½çš„æœ‰iPhone 6ï¼ŒiPhone 6 Plusï¼ŒiPhone 6sï¼Œ iPhone 6s Plusï¼›iPad Air 2ï¼ŒiPad mini 3ï¼ŒiPad mini 4ï¼ŒiPad Proï¼›è¿˜æœ‰Apple Watch.</span><br><span class="line">    if ([PKPaymentAuthorizationViewController canMakePayments]) &#123;</span><br><span class="line">        </span><br><span class="line">        //æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªè¯·æ±‚æ”¯ä»˜PKPaymentRequestç±»çš„å¯¹è±¡</span><br><span class="line">        PKPaymentRequest *request = [[PKPaymentRequest  alloc]init];</span><br><span class="line">        </span><br><span class="line">        //ç„¶åè®¾ç½®æ”¯ä»˜çš„å•†å“çš„ç›®å½•  NSDecimalNumberæ˜¯ç”¨äºè®°å½•å•†å“çš„ä»·æ ¼çš„ä¸€ä¸ªç±»</span><br><span class="line">        PKPaymentSummaryItem * item1 = [PKPaymentSummaryItem summaryItemWithLabel:@&quot;æ ‹å“¥çš„87é”®é»‘è½´çºªå¿µç‰ˆé”®ç›˜&quot; amount:[NSDecimalNumber decimalNumberWithString:@&quot;400&quot;]];</span><br><span class="line">        </span><br><span class="line">        PKPaymentSummaryItem * item2 = [PKPaymentSummaryItem summaryItemWithLabel:@&quot;æ ‹å“¥çš„IE3.0çºªå¿µç‰ˆé¼ æ ‡&quot; amount:[NSDecimalNumber decimalNumberWithString:@&quot;200&quot;]];</span><br><span class="line">        </span><br><span class="line">        PKPaymentSummaryItem * item3 = [PKPaymentSummaryItem summaryItemWithLabel:@&quot;æ ‹å“¥çš„èµ›ç¿çºªå¿µç‰ˆéœœå†»ä¹‹è“è€³æœº&quot; amount:[NSDecimalNumber decimalNumberWithString:@&quot;1000&quot;]];</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        PKPaymentSummaryItem * item4 = [PKPaymentSummaryItem summaryItemWithLabel:@&quot;ç¥ç»éªšæ ‹&quot; amount:[NSDecimalNumber decimalNumberWithString:@&quot;6000&quot;] type:PKPaymentSummaryItemTypeFinal];</span><br><span class="line">        </span><br><span class="line">        //è®¾ç½®paymentSummaryItemsçš„æ•°ç»„å…ƒç´ .</span><br><span class="line">        request.paymentSummaryItems = @[item1,item2,item3,item4];</span><br><span class="line">        </span><br><span class="line">        //æŒ‡å®šå›½å®¶åŒºåŸŸç¼–å·</span><br><span class="line">        request.countryCode = @&quot;CN&quot;;</span><br><span class="line">        </span><br><span class="line">        //æŒ‡å®šå›½å®¶è´§å¸ç§ç±»,åœ¨ä¸‹é¢æˆ‘ä¼šè¯´åˆ°å„å›½çš„è´§å¸ç§ç±»éƒ½å«ä»€ä¹ˆ,ç°åœ¨æˆ‘ä»¬å°±ç”¨RMBæ¥è¯´å§</span><br><span class="line">        request.currencyCode = @&quot;CNY&quot;;</span><br><span class="line">        </span><br><span class="line">        //ç„¶åæŒ‡å®šæ”¯æŒçš„ç½‘ä¸Šé“¶è¡Œæ”¯ä»˜æ‰‹æ®µ</span><br><span class="line">        request.supportedNetworks = @[PKPaymentNetworkMasterCard,PKPaymentNetworkVisa];</span><br><span class="line">        </span><br><span class="line">        //æŒ‡å®šAppéœ€è¦çš„å•†ä¸šID</span><br><span class="line">        request.merchantIdentifier = @&quot;merchant.com.Dong.ApplePay&quot;;</span><br><span class="line">        </span><br><span class="line">        //æŒ‡å®šæ”¯ä»˜çš„æƒé™çš„èŒƒå›´é™åˆ¶</span><br><span class="line">        request.merchantCapabilities = PKMerchantCapabilityEMV;</span><br><span class="line">        </span><br><span class="line">        //è®¾ç½®è®¢å•æ¥å—çš„åœ°å€</span><br><span class="line">        request.requiredBillingAddressFields = PKAddressFieldEmail | PKAddressFieldPostalAddress;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        /***********************requestæ”¯ä»˜è¯·æ±‚å·²ç»è®¾ç½®å®Œæˆ**********************/</span><br><span class="line">        </span><br><span class="line">        //è®¾ç½®æ”¯ä»˜é¡µé¢çš„ç›¸å…³ä¿¡æ¯</span><br><span class="line">        PKPaymentAuthorizationViewController *payMentVC = [[PKPaymentAuthorizationViewController alloc]initWithPaymentRequest:request];</span><br><span class="line">        </span><br><span class="line">        //è®¾ç½®ä»£ç†</span><br><span class="line">        payMentVC.delegate = self;</span><br><span class="line">        </span><br><span class="line">        if (!payMentVC) &#123;</span><br><span class="line">            </span><br><span class="line">            NSLog(@&quot;æ”¯ä»˜é¡µé¢å¤±è´¥!&quot;);</span><br><span class="line">            </span><br><span class="line">        &#125;else&#123;</span><br><span class="line">        </span><br><span class="line">            [self presentViewController:payMentVC animated:YES completion:nil];</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    </span><br><span class="line">        NSLog(@&quot;è®¾å¤‡ä¸æ”¯æŒApply Pay åŠŸèƒ½!&quot;);</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>####å½“æˆ‘ä»¬å®Œæˆä¸Šé¢çš„å·¥ä½œä¹‹å,å°±è¦å¿…é¡»å®Œæˆä¸‹é¢çš„ä¸¤ä¸ªä»£ç†æ–¹æ³•.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#pragma mark----æ”¯ä»˜è¿‡ç¨‹ä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•-----</span><br><span class="line"></span><br><span class="line">//paymentå°±æ˜¯æ”¯ä»˜çš„å¯¹è±¡ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜åœ¨è¿™ä¸ªå¯¹è±¡å½“ä¸­.</span><br><span class="line">-(void)paymentAuthorizationViewController:(PKPaymentAuthorizationViewController *)controller didAuthorizePayment:(PKPayment *)payment completion:(void (^)(PKPaymentAuthorizationStatus))completion&#123;</span><br><span class="line"></span><br><span class="line">    //è·å–åˆ°æœåŠ¡å™¨å‘ç»™ç”¨æˆ·çš„token.tokené‡Œé¢å«æœ‰æˆåŠŸæˆ–è€…æ˜¯å¤±è´¥çš„ä¿¡æ¯.</span><br><span class="line">    PKPaymentToken *token = payment.token;</span><br><span class="line">    </span><br><span class="line">    //æ‹¿åˆ°è®¢å•äººç›¸å…³çš„ä¿¡æ¯,å…¶å®åŒ…æ‹¬åœ°å€,å§“å,é‚®ç®±ç­‰ç­‰</span><br><span class="line">    NSString *name = payment.billingContact.name.nickname;</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,name);</span><br><span class="line">    </span><br><span class="line">    //ä¸Šé¢çš„tokenå’Œnameå‘é€åˆ°è‡ªå·±çš„æœåŠ¡å™¨,ç”±è‡ªå·±çš„æœåŠ¡å™¨å’Œå•†å®¶è¿›è¡Œæ¥å£çš„è°ƒç”¨è¿”å›ä¸€ä¸ªç»“æœ,æˆ‘ä»¬å°†è¿™ä¸ªè¿”å›çš„ç»“æœå†ä¸å®¢æˆ·ç«¯çš„ç”¨æˆ·è¿›è¡Œäº¤äº’,</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    //çŠ¶æ€ç»“æœçš„ç±»ä¸ºPKPaymentAuthorizationStatus,å› ä¸ºæˆ‘ä»¬åšçš„æ˜¯æµ‹è¯•,æ‰€ä»¥æˆ‘ä»¬å°±å…ˆæŒ‡å®šä»–ä¸ºæˆåŠŸ</span><br><span class="line">    PKPaymentAuthorizationStatus status = PKPaymentAuthorizationStatusSuccess;</span><br><span class="line">    </span><br><span class="line">    completion(status);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark----æ”¯ä»˜å®Œæˆ-----</span><br><span class="line"></span><br><span class="line">-(void)paymentAuthorizationViewControllerDidFinish:(PKPaymentAuthorizationViewController *)controller&#123;</span><br><span class="line"></span><br><span class="line">    //éšè—æ”¯ä»˜ç•Œé¢</span><br><span class="line">    [controller dismissViewControllerAnimated:YES completion:nil];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p></p>
<p>###ä¸‹é¢å°±æ˜¯ä¸–ç•Œä¸»è¦è´§å¸çš„è‹±æ–‡ç®€å†™è¡¨,å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©..</p>
<table>
<thead>
<tr>
<th>å›½å®¶è´§å¸åç§°</th>
<th style="text-align:center">è´§å¸è‹±æ–‡ç®€å†™</th>
</tr>
</thead>
<tbody>
<tr>
<td>äººæ°‘å¸</td>
<td style="text-align:center">CNY</td>
</tr>
<tr>
<td>è‹±é•‘</td>
<td style="text-align:center">GBP</td>
</tr>
<tr>
<td>æ¯”åˆ©æ—¶æ³•éƒ</td>
<td style="text-align:center">BEF</td>
</tr>
<tr>
<td>æ–°è¥¿å…°å…ƒ</td>
<td style="text-align:center">NZD</td>
</tr>
<tr>
<td>æ¸¯å¸</td>
<td style="text-align:center">HKD</td>
</tr>
<tr>
<td>æ„å¤§åˆ©é‡Œæ‹‰</td>
<td style="text-align:center">ITL</td>
</tr>
<tr>
<td>å¥¥åœ°åˆ©å…ˆä»¤</td>
<td style="text-align:center">ATS</td>
</tr>
<tr>
<td>ç¾å…ƒ</td>
<td style="text-align:center">USD</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>å›½å®¶è´§å¸åç§°</th>
<th style="text-align:center">è´§å¸è‹±æ–‡ç®€å†™</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ—¥å…ƒ</td>
<td style="text-align:center">JPY</td>
</tr>
<tr>
<td>æŒªå¨å…‹æœ—</td>
<td style="text-align:center">NOK</td>
</tr>
<tr>
<td>ç‘å£«æ³•éƒ</td>
<td style="text-align:center">CHF</td>
</tr>
<tr>
<td>åŠ æ‹¿å¤§å…ƒ</td>
<td style="text-align:center">CAD</td>
</tr>
<tr>
<td>æ³°å›½é“¢</td>
<td style="text-align:center">THB</td>
</tr>
<tr>
<td>å¾·å›½é©¬å…‹</td>
<td style="text-align:center">DEM</td>
</tr>
<tr>
<td>æ¾³å¤§åˆ©äºšå…ƒ</td>
<td style="text-align:center">AUD</td>
</tr>
<tr>
<td>ä¸¹éº¦å…‹æœ—</td>
<td style="text-align:center">DKK</td>
</tr>
<tr>
<td>æ³•å›½æ³•éƒ</td>
<td style="text-align:center">FRF</td>
</tr>
<tr>
<td>è¥¿ç­ç‰™æ¯”å¡å¡”</td>
<td style="text-align:center">ESP</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>å›½å®¶è´§å¸åç§°</th>
<th style="text-align:center">è´§å¸è‹±æ–‡ç®€å†™</th>
</tr>
</thead>
<tbody>
<tr>
<td>è²å¾‹å®¾æ¯”ç´¢</td>
<td style="text-align:center">PHP</td>
</tr>
<tr>
<td>æ–°åŠ å¡å…ƒ</td>
<td style="text-align:center">SGD</td>
</tr>
<tr>
<td>æ¬§å…ƒ</td>
<td style="text-align:center">EUR</td>
</tr>
<tr>
<td>ç‘å…¸å…‹æœ—</td>
<td style="text-align:center">SEK</td>
</tr>
<tr>
<td>è·å…°ç›¾</td>
<td style="text-align:center">NLG</td>
</tr>
<tr>
<td>èŠ¬å…°é©¬å…‹</td>
<td style="text-align:center">FIM</td>
</tr>
<tr>
<td>æ¾³é—¨å…ƒ</td>
<td style="text-align:center">MOP</td>
</tr>
</tbody>
</table>
<p></p>
<p>####ä»£ç æˆ‘éƒ½åšäº†è¯¦ç»†çš„æ³¨é‡Š,å¦‚æœè¿˜æœ‰ä¸æ‡‚çš„,å¯ä»¥å‚è€ƒæˆ‘çš„Demo ä»¥åŠ ä¸‹é¢çš„èµ„æ–™</p>
<p>####<a href="http://yun.baidu.com/share/link?shareid=1076887904&amp;uk=4079807053" target="_blank" rel="external">â€”â€”â€“&gt;ç‚¹å‡»ä¸‹è½½Demo</a></p>
<p>####<a href="http://www.coderqi.com/2016/02/25/AppPay/#more" target="_blank" rel="external">â€”â€”â€“&gt;ç‚¹å‡»è¿›å…¥codeqiåšå®¢</a></p>
<p></p>
<p>###ä»Šå¤©çš„Apply Payå°±ä»‹ç»åˆ°è¿™,ğŸ˜ƒ,å¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆæ„è§å¯ä»¥ç»™æˆ‘ç•™è¨€.</p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2016/03/07/åå±±è®ºå‰‘ä¹‹Apple Pay/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://yoursite.com/2016/03/07/åå±±è®ºå‰‘ä¹‹Apple Pay/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2016/03/07/åå±±è®ºå‰‘ä¹‹Apple Pay/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2016-03-07T09:16:47.000Z"><a href="/2016/03/07/åå±±è®ºå‰‘ä¹‹æµ…è°ˆioså•ä¾‹/">é€±ä¸€, 3æœˆ 7 2016, 5:16:47 ä¸‹åˆ</a></time>

  
    <h1 class="title"><a href="/2016/03/07/åå±±è®ºå‰‘ä¹‹æµ…è°ˆioså•ä¾‹/">åå±±è®ºå‰‘ä¹‹Apple Pay</a></h1>
  



<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>##åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSå•ä¾‹<br><br></p>
<blockquote>
<p>####<strong>â€œä¸ç®¡çœŸå•ä¾‹è¿˜æ˜¯ä¼ªå•ä¾‹,ç§åœ°å°±ç”¨å²ä¸¹åˆ©!â€</strong>   â€”â€”æ ‹å“¥</p>
</blockquote>
<p></p>
<p>####ä»Šå¤©å°±ç®€å•çš„è°ˆä¸€ä¸‹å•ä¾‹çš„åˆ›å»ºå’Œä½¿ç”¨,å•ä¾‹å°±æ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„ç±»,å•ä¾‹çš„ç‰¹ç‚¹å°±æ˜¯å½“å•ä¾‹å¯¹è±¡è¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™å°±ä¼šä¸€ç›´å­˜åœ¨,ç›´åˆ°ç¨‹åºè¢«æ€æ­»,å•ä¾‹å¯¹è±¡æ‰ä¼šä»å†…å­˜ä¸­é‡Šæ”¾æ‰,å•ä¾‹ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„ç‰¹æ€§å‘¢?è¿™æ˜¯å› ä¸ºå•ä¾‹å¯¹è±¡æ˜¯å­˜åœ¨äºå†…å­˜ä¸­çš„é™æ€åŒºçš„,æ‰€ä»¥å®ƒçš„ç”Ÿå‘½å‘¨æœŸç‰¹åˆ«çš„é•¿.é‚£ä¹ˆæˆ‘ä»¬éƒ½åœ¨ä»€ä¹ˆæ—¶å€™ç”¨åˆ°å•ä¾‹å‘¢?å½“æˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªäº‹ä»¶åªæ‰§è¡Œä¸€æ¬¡çš„æ—¶å€™,æ¯”å¦‚ç½‘ç»œè§£æçš„æ—¶å€™,æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå•ä¾‹å­˜å‚¨æˆ‘ä»¬çš„ç½‘ç»œæ•°æ®,è¿™æ ·å°±å¯ä»¥æœ‰æ•ˆçš„é¿å…ä»£ç çš„å†—æ‚åº¦äº†.å½“ç„¶äº†,å•ä¾‹çš„ä½¿ç”¨æœ‰åˆ©ä¹Ÿæœ‰å¼Š,ä»–çš„æœ‰åˆ©ä¹‹å¤„åœ¨äºä»–å¯ä»¥æœ‰æ•ˆçš„é¿å…ä»£ç çš„å†—æ‚åº¦,ä½†æ˜¯ç”±äºå•ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå¯¼è‡´æ•°æ®çš„ä¸å®‰å…¨æ€§.åŒæ—¶ä¼šè®©å ç”¨çš„å†…å­˜ä¸èƒ½åŠæ—¶çš„å¾—åˆ°é‡Šæ”¾,å½±å“äº†ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡.</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1396375-bbd653fd3b849780.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p></p>
<p>##ä¼ªå•ä¾‹</p>
<p>####ç›¸æ¯”äºå®Œæ•´å•ä¾‹,ä¼ªå•ä¾‹çš„åˆ›å»ºå°±ç›¸å¯¹ç®€å•çš„å¤šäº†.ä¼ªå•ä¾‹å¯¹è±¡åªéœ€è¦å¯¹å…¶åˆå§‹åŒ–æ–¹æ³•è¿›è¡Œä¿®æ”¹å°±è¡Œ.ç°åœ¨æˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªä¼ªå•ä¾‹å¯¹è±¡Person.åœ¨Person.hæ–‡ä»¶ä¸­æˆ‘ä»¬è¦å£°æ˜ä¸€ä¸ªç±»æ–¹æ³•ç”¨äºå•ä¾‹çš„åˆå§‹åŒ–.å•ä¾‹çš„ç±»å‹å¯ä»¥å¤šç§å¤šæ ·,ä¸ä¸€å®šå°±æ˜¯NSObjectçš„å­ç±».<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">@interface Person : NSObject</span><br><span class="line"></span><br><span class="line">+(instancetype)defaultPerson;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>####æˆ‘ä»¬åœ¨Person.mæ–‡ä»¶ä¸­å°±è¦defaultPersonè¿›è¡Œå®ç°äº†.è¿™é‡Œå®ç°çš„æ–¹å¼æœ‰ä¸¤ç§ä¸€ç§æ˜¯ä½¿ç”¨@synchronizedè¿›è¡ŒåŠ é”æ“ä½œ,å¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨GCDè¿›è¡ŒåŠ é”.<br><br>@synchronizedè¿›è¡ŒåŠ é”.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;Person.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation Person</span><br><span class="line"></span><br><span class="line">static Person *person = nil;</span><br><span class="line"></span><br><span class="line">+(instancetype)defaultPerson&#123;</span><br><span class="line"></span><br><span class="line">    @synchronized(self) &#123;</span><br><span class="line">        </span><br><span class="line">        if (nil == person) &#123;</span><br><span class="line">            </span><br><span class="line">            person = [[Person alloc]init];</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line">    &#125;</span><br><span class="line">    return person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p><br>ä½¿ç”¨GCDè¿›è¡ŒåŠ é”.  dispatch_onceè¿™ä¸ªçº¿ç¨‹ä¹‹ååªä¼šèµ°ä¸€æ¬¡.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;Person.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation Person</span><br><span class="line"></span><br><span class="line">static Person *person = nil;</span><br><span class="line"></span><br><span class="line">+(instancetype)defaultPerson&#123;</span><br><span class="line">    </span><br><span class="line">    static dispatch_once_t onceToken;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        </span><br><span class="line">        person = [[Person alloc] init];</span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    return person;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>####è¿™æ ·æˆ‘ä»¬åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡å…¨å±€å°±å”¯ä¸€å­˜åœ¨äº†,å…¶å®è¿™æ˜¯ä¸å®Œæ•´çš„,å› ä¸ºå¦‚æœæœ‰ å¯¹è¯¥å¯¹è±¡è¿›è¡Œcopy mutableCopy copyWithZone ç­‰æ“ä½œæ—¶ï¼Œå°±ä¸æ˜¯åŒä¸€ä»½å¯¹è±¡äº†ã€‚æ‰€ä»¥å®Œæ•´å•ä¾‹å°±æ˜¯è¦å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œé‡å†™.<br><br><br></p>
<p>##å®Œæ•´å•ä¾‹</p>
<p>####ç›¸å¯¹äºä¼ªå•ä¾‹,å®Œæ•´å•ä¾‹éœ€è¦é‡å†™çš„æ–¹æ³•æœ‰ä¸¤ä¸ªæ–¹å‘,ä¸€ä¸ªæ˜¯åˆå§‹åŒ–æ–¹æ³•,å¦å¤–ä¸€ä¸ªå°±æ˜¯copyçš„ä¸€ç³»åˆ—çš„æ–¹æ³•.æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹åˆå§‹åŒ–æ–¹æ³•.</p>
<p><br>åˆ›å»ºå•ä¾‹çš„æ–¹æ³•,æˆ‘ä»¬ä¼šä½¿ç”¨åˆ°allocWithZoneè¿™ä¸ªæ–¹æ³•é¿å…å‡ºç°æ­»å¾ªç¯.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">static Person *person = nil;</span><br><span class="line"></span><br><span class="line">+(instancetype)defaultPerson&#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    @synchronized(self)&#123;</span><br><span class="line">        if (nil == person) &#123;</span><br><span class="line">            </span><br><span class="line">            person = [[super allocWithZone:nil] init]; // é¿å…æ­»å¾ªç¯</span><br><span class="line">            // å¦‚æœ åœ¨å•ä¾‹ç±»é‡Œé¢é‡å†™äº† allocWithZone æ–¹æ³• ï¼Œåœ¨åˆ›å»ºå•ä¾‹å¯¹è±¡æ—¶ ä½¿ç”¨ [[DataHandle alloc] init] åˆ›å»ºï¼Œä¼šæ­»å¾ªç¯ã€‚</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return person;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ allocWithZone å’Œalloc æ–¹æ³•æ˜¯å¦‚ä½•ä¿®æ”¹çš„.è¿™æ ·å°±ä¿è¯å†æ¬¡å¼€è¾Ÿç©ºé—´ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ (instancetype)allocWithZone:(struct _NSZone *)zone</span><br><span class="line">&#123;</span><br><span class="line">    return [Person defaultPerson];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (instancetype)alloc</span><br><span class="line">&#123;</span><br><span class="line">    return [Person defaultPerson];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å†çœ‹ä¸€ä¸‹å‰©ä¸‹çš„copyä¸€ç³»åˆ—çš„æ–¹æ³•çš„ä¿®æ”¹,è¿”å›å€¼å…¨éƒ¨æ˜¯è‡ªå·±æœ¬èº«,è¿™æ ·ä¿éšœä¸ç®¡æ€ä¹ˆå¤åˆ¶éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (id)copy</span><br><span class="line">&#123;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (id)mutableCopy</span><br><span class="line">&#123;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (id)copyWithZone:(struct _NSZone *)zone</span><br><span class="line">&#123;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å½“ç„¶äº†,åœ¨MRCç¯å¢ƒä¸‹.å¼•ç”¨è®¡æ•°æˆ‘ä»¬æ˜¯è¿™æ ·åšçš„ä¿®æ”¹çš„,å› ä¸ºåªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡,æ‰€ä»¥å¼•ç”¨è®¡æ•°å¯¹å®ä¾‹å¯¹è±¡å®é™…ä¸Šæ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)retain</span><br><span class="line">&#123;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (oneway void)release</span><br><span class="line">&#123;</span><br><span class="line">    // nothing</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (instancetype)autorelease</span><br><span class="line">&#123;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSUInteger)retainCount</span><br><span class="line">&#123;</span><br><span class="line">    return NSUIntegerMax; // è¿”å›æ•´å½¢æœ€å¤§å€¼ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2016/03/07/åå±±è®ºå‰‘ä¹‹æµ…è°ˆioså•ä¾‹/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://yoursite.com/2016/03/07/åå±±è®ºå‰‘ä¹‹æµ…è°ˆioså•ä¾‹/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2016/03/07/åå±±è®ºå‰‘ä¹‹æµ…è°ˆioså•ä¾‹/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>

<script src="/js/jquery.anystretch.min.js"></script>
<script src="/js/cover.js"></script>

    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  &copy; 2016 ç¥ç»éªšæ ‹
  
</div>
Powered by <a href="http://zespia.tw/hexo/" title="Hexo" target="_blank" rel="external">Hexo</a> and <a href="http://pages.github.com/" title="GitHub Pages" target="_blank" rel="external">GitHub Pages</a>

<div class="clearfix"></div></footer>
  
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>




    <script type="text/javascript">
        (function(){

            $(window).scroll(function(){

                var scrollTop = $(window).scrollTop();
                if ( scrollTop >200 ){
                    $("#main-nav").removeClass('normal_mode').addClass('top_mode');
                } else{
                    $("#main-nav").removeClass('top_mode').addClass('normal_mode');
                }

            });

        })();
    </script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
  (function($){
    $('.fancybox').fancybox({
      'titlePosition': 'inside'
    });
  })(jQuery);
  </script>



    
    <script type="text/javascript">
      var duoshuoQuery = {short_name:"your_id"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



<script type="text/javascript">
  
  $(function(){

    $('.title').hover(
      function() {      
        $(this).stop().animate(
          {'marginLeft': '10px'}, 200
        );   
      }, 
      function() {       
        $(this).stop().animate({'marginLeft': '0px'}, 200);      
      
    });   

  });

</script>


</body>
</html>