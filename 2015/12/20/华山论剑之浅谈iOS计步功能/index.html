<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="å†™ä»£ç ,æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯” .">
<meta property="og:type" content="article">
<meta property="og:title" content="åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSè®¡æ­¥åŠŸèƒ½">
<meta property="og:url" content="http://yoursite.com/2015/12/20/åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSè®¡æ­¥åŠŸèƒ½/index.html">
<meta property="og:site_name" content="Coder-Dong">
<meta property="og:description" content="å†™ä»£ç ,æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯” .">
<meta property="og:image" content="http://ww1.sinaimg.cn/large/8446c8c7gw1f1rqdmosbsj20ao0ap3zb.jpg">
<meta property="og:updated_time" content="2016-03-10T09:05:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSè®¡æ­¥åŠŸèƒ½">
<meta name="twitter:description" content="å†™ä»£ç ,æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯” .">
<meta name="twitter:image" content="http://ww1.sinaimg.cn/large/8446c8c7gw1f1rqdmosbsj20ao0ap3zb.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'åšä¸»'
    }
  };
</script>

  <title> åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSè®¡æ­¥åŠŸèƒ½ | Coder-Dong </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Coder-Dong</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="http://www.ixirong.com/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSè®¡æ­¥åŠŸèƒ½
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2015-12-20T14:01:25+08:00" content="2015-12-20">
              2015-12-20
            </time>
          </span>

          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<h4 id="å†™ä»£ç -æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯”"><a href="#å†™ä»£ç -æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯”" class="headerlink" title="å†™ä»£ç ,æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯” ."></a>å†™ä»£ç ,æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯” .</h4><p></p>
</blockquote>
<hr>
<a id="more"></a>
<h4 id="ç°åœ¨çš„Appåº”ç”¨æœ€ç«çš„æ˜¯ä»€ä¹ˆ-åº—é“ºç±»çš„Appæ˜¯æœ€ç«çš„-ç„¶åå°±æ˜¯è¿åŠ¨å¥åº·-ä»Šå¤©æˆ‘å°±å¯¹è¿åŠ¨è®¡æ­¥è¿™ä¸€æ¨¡å—è¿›è¡Œåˆæ¬¡çš„å°è¯•"><a href="#ç°åœ¨çš„Appåº”ç”¨æœ€ç«çš„æ˜¯ä»€ä¹ˆ-åº—é“ºç±»çš„Appæ˜¯æœ€ç«çš„-ç„¶åå°±æ˜¯è¿åŠ¨å¥åº·-ä»Šå¤©æˆ‘å°±å¯¹è¿åŠ¨è®¡æ­¥è¿™ä¸€æ¨¡å—è¿›è¡Œåˆæ¬¡çš„å°è¯•" class="headerlink" title="ç°åœ¨çš„Appåº”ç”¨æœ€ç«çš„æ˜¯ä»€ä¹ˆ? åº—é“ºç±»çš„Appæ˜¯æœ€ç«çš„,ç„¶åå°±æ˜¯è¿åŠ¨å¥åº·,ä»Šå¤©æˆ‘å°±å¯¹è¿åŠ¨è®¡æ­¥è¿™ä¸€æ¨¡å—è¿›è¡Œåˆæ¬¡çš„å°è¯•."></a>ç°åœ¨çš„Appåº”ç”¨æœ€ç«çš„æ˜¯ä»€ä¹ˆ? åº—é“ºç±»çš„Appæ˜¯æœ€ç«çš„,ç„¶åå°±æ˜¯è¿åŠ¨å¥åº·,ä»Šå¤©æˆ‘å°±å¯¹è¿åŠ¨è®¡æ­¥è¿™ä¸€æ¨¡å—è¿›è¡Œåˆæ¬¡çš„å°è¯•.</h4><h4 id="å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è®¡æ­¥çš„æ—¶å€™-å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹åŠ é€Ÿè®¡å’Œé™€èºä»ªè¿™ä¸¤ä¸ªç¥å¥‡çš„ä¸œè¥¿-æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è°ƒç”¨åŠ é€Ÿè®¡å’Œé™€èºä»ªæ¥è¿›è¡Œæˆ‘ä»¬çš„è®¡æ­¥æ“ä½œ-CoreMotionæ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†Motionçš„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªï¼Œåœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±UIAccelerometerç±»æ¥è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ç”¨CoreMotionæ¥å¤„ç†åŠ é€Ÿåº¦è¿‡ç¨‹"><a href="#å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è®¡æ­¥çš„æ—¶å€™-å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹åŠ é€Ÿè®¡å’Œé™€èºä»ªè¿™ä¸¤ä¸ªç¥å¥‡çš„ä¸œè¥¿-æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è°ƒç”¨åŠ é€Ÿè®¡å’Œé™€èºä»ªæ¥è¿›è¡Œæˆ‘ä»¬çš„è®¡æ­¥æ“ä½œ-CoreMotionæ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†Motionçš„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªï¼Œåœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±UIAccelerometerç±»æ¥è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ç”¨CoreMotionæ¥å¤„ç†åŠ é€Ÿåº¦è¿‡ç¨‹" class="headerlink" title="å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è®¡æ­¥çš„æ—¶å€™,å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹åŠ é€Ÿè®¡å’Œé™€èºä»ªè¿™ä¸¤ä¸ªç¥å¥‡çš„ä¸œè¥¿,æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è°ƒç”¨åŠ é€Ÿè®¡å’Œé™€èºä»ªæ¥è¿›è¡Œæˆ‘ä»¬çš„è®¡æ­¥æ“ä½œ.CoreMotionæ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†Motionçš„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªï¼Œåœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±UIAccelerometerç±»æ¥è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ç”¨CoreMotionæ¥å¤„ç†åŠ é€Ÿåº¦è¿‡ç¨‹."></a>å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è®¡æ­¥çš„æ—¶å€™,å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹åŠ é€Ÿè®¡å’Œé™€èºä»ªè¿™ä¸¤ä¸ªç¥å¥‡çš„ä¸œè¥¿,æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è°ƒç”¨åŠ é€Ÿè®¡å’Œé™€èºä»ªæ¥è¿›è¡Œæˆ‘ä»¬çš„è®¡æ­¥æ“ä½œ.CoreMotionæ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†Motionçš„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªï¼Œåœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±UIAccelerometerç±»æ¥è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ç”¨CoreMotionæ¥å¤„ç†åŠ é€Ÿåº¦è¿‡ç¨‹.</h4><p> </p>
<h4 id="åŠ é€Ÿè®¡"><a href="#åŠ é€Ÿè®¡" class="headerlink" title="åŠ é€Ÿè®¡"></a>åŠ é€Ÿè®¡</h4><p>åŠ é€Ÿè®¡çš„x,y,zä¸‰ä¸ªæ–¹å‘,å‚è€ƒä¸‹å›¾:</p>
<p><img src="http://ww1.sinaimg.cn/large/8446c8c7gw1f1rqdmosbsj20ao0ap3zb.jpg" alt="â€œç¥ç»éªšæ ‹â€/"></p>
<h4 id="Core-Motionçš„å¤§ä½“ä»‹ç»å°±æ˜¯è¿™äº›ã€‚ä¸‹é¢è¯´è¯´Core-Motionå…·ä½“è´Ÿè´£çš„é‡‡é›†ï¼Œè®¡ç®—å’Œå¤„ç†ã€‚Core-Motionçš„ä½¿ç”¨å°±æ˜¯ä¸€ä¸‰éƒ¨æ›²ï¼šåˆå§‹åŒ–ï¼Œè·å–æ•°æ®ï¼Œå¤„ç†åäº‹ã€‚"><a href="#Core-Motionçš„å¤§ä½“ä»‹ç»å°±æ˜¯è¿™äº›ã€‚ä¸‹é¢è¯´è¯´Core-Motionå…·ä½“è´Ÿè´£çš„é‡‡é›†ï¼Œè®¡ç®—å’Œå¤„ç†ã€‚Core-Motionçš„ä½¿ç”¨å°±æ˜¯ä¸€ä¸‰éƒ¨æ›²ï¼šåˆå§‹åŒ–ï¼Œè·å–æ•°æ®ï¼Œå¤„ç†åäº‹ã€‚" class="headerlink" title="Core Motionçš„å¤§ä½“ä»‹ç»å°±æ˜¯è¿™äº›ã€‚ä¸‹é¢è¯´è¯´Core Motionå…·ä½“è´Ÿè´£çš„é‡‡é›†ï¼Œè®¡ç®—å’Œå¤„ç†ã€‚Core Motionçš„ä½¿ç”¨å°±æ˜¯ä¸€ä¸‰éƒ¨æ›²ï¼šåˆå§‹åŒ–ï¼Œè·å–æ•°æ®ï¼Œå¤„ç†åäº‹ã€‚"></a>Core Motionçš„å¤§ä½“ä»‹ç»å°±æ˜¯è¿™äº›ã€‚ä¸‹é¢è¯´è¯´Core Motionå…·ä½“è´Ÿè´£çš„é‡‡é›†ï¼Œè®¡ç®—å’Œå¤„ç†ã€‚Core Motionçš„ä½¿ç”¨å°±æ˜¯ä¸€ä¸‰éƒ¨æ›²ï¼šåˆå§‹åŒ–ï¼Œè·å–æ•°æ®ï¼Œå¤„ç†åäº‹ã€‚</h4><h4 id="åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸ç®¡ä½ è¦è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯"><a href="#åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸ç®¡ä½ è¦è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯" class="headerlink" title="åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸ç®¡ä½ è¦è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯"></a>åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸ç®¡ä½ è¦è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">motionManager = [[CMMotionManager alloc] init];</span><br></pre></td></tr></table></figure>
<h4 id="æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šç”±è¿™ä¸ªmanageræ¥ç®¡ã€‚åé¢çš„åˆå§‹åŒ–æ“ä½œç›¸å½“ç›´è§‚ï¼Œä»¥åŠ é€Ÿåº¦çš„pullæ–¹å¼ä¸ºä¾‹"><a href="#æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šç”±è¿™ä¸ªmanageræ¥ç®¡ã€‚åé¢çš„åˆå§‹åŒ–æ“ä½œç›¸å½“ç›´è§‚ï¼Œä»¥åŠ é€Ÿåº¦çš„pullæ–¹å¼ä¸ºä¾‹" class="headerlink" title="æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šç”±è¿™ä¸ªmanageræ¥ç®¡ã€‚åé¢çš„åˆå§‹åŒ–æ“ä½œç›¸å½“ç›´è§‚ï¼Œä»¥åŠ é€Ÿåº¦çš„pullæ–¹å¼ä¸ºä¾‹"></a>æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šç”±è¿™ä¸ªmanageræ¥ç®¡ã€‚åé¢çš„åˆå§‹åŒ–æ“ä½œç›¸å½“ç›´è§‚ï¼Œä»¥åŠ é€Ÿåº¦çš„pullæ–¹å¼ä¸ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (!motionManager.accelerometerAvailable) &#123;  </span><br><span class="line">// fail code // æ£€æŸ¥ä¼ æ„Ÿå™¨åˆ°åº•åœ¨è®¾å¤‡ä¸Šæ˜¯å¦å¯ç”¨  </span><br><span class="line">&#125;  </span><br><span class="line">motionManager.accelerometerUpdateInterval = 0.01; // å‘Šè¯‰managerï¼Œæ›´æ–°é¢‘ç‡æ˜¯100Hz  </span><br><span class="line">[motionManager startAccelerometerUpdates]; // å¼€å§‹æ›´æ–°ï¼Œåå°çº¿ç¨‹å¼€å§‹è¿è¡Œã€‚è¿™æ˜¯pullæ–¹å¼ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="å¦‚æœæ˜¯pushæ–¹å¼ï¼Œæ›´æ–°çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·"><a href="#å¦‚æœæ˜¯pushæ–¹å¼ï¼Œæ›´æ–°çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·" class="headerlink" title="å¦‚æœæ˜¯pushæ–¹å¼ï¼Œæ›´æ–°çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·"></a>å¦‚æœæ˜¯pushæ–¹å¼ï¼Œæ›´æ–°çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[motionManager startAccelerometerUpdatesToQueue:[NSOperationQueue currentQueue] withHandler:^(CMAccelerometerData *latestAcc, NSError *error)  </span><br><span class="line">&#123;  </span><br><span class="line">// Your code here  </span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h4 id="æ¥ä¸‹æ¥å°±æ˜¯è·å–æ•°æ®äº†ã€‚Againï¼Œå¾ˆç®€å•çš„ä»£ç "><a href="#æ¥ä¸‹æ¥å°±æ˜¯è·å–æ•°æ®äº†ã€‚Againï¼Œå¾ˆç®€å•çš„ä»£ç " class="headerlink" title="æ¥ä¸‹æ¥å°±æ˜¯è·å–æ•°æ®äº†ã€‚Againï¼Œå¾ˆç®€å•çš„ä»£ç "></a>æ¥ä¸‹æ¥å°±æ˜¯è·å–æ•°æ®äº†ã€‚Againï¼Œå¾ˆç®€å•çš„ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CMAccelerometerData *newestAccel = motionManager.accelerometerData;  </span><br><span class="line">filteredAcceleration[0] = newestAccel.acceleration.x;  </span><br><span class="line">filteredAcceleration[1] = newestAccel.acceleration.y;  </span><br><span class="line">filteredAcceleration[2] = newestAccel.acceleration.z;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å®šä¹‰çš„CMAccelerometerDataå˜é‡ï¼Œè·å–CMAccelerationä¿¡æ¯ã€‚å’Œä»¥å‰çš„UIAccelerometerç±»çš„ä½¿ç”¨æ–¹å¼ä¸€æ ·ï¼ŒCMAccelerationåœ¨Core Motionä¸­æ˜¯ä»¥ç»“æ„ä½“å½¢å¼å®šä¹‰çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">typedef struct &#123;  </span><br><span class="line">double x;  </span><br><span class="line">double y;  </span><br><span class="line">double z;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="å¯¹åº”çš„motionä¿¡æ¯ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦æˆ–è€…æ—‹è½¬é€Ÿåº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä»è¿™ä¸‰ä¸ªæˆå‘˜å˜é‡ä¸­å¾—åˆ°ã€‚"><a href="#å¯¹åº”çš„motionä¿¡æ¯ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦æˆ–è€…æ—‹è½¬é€Ÿåº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä»è¿™ä¸‰ä¸ªæˆå‘˜å˜é‡ä¸­å¾—åˆ°ã€‚" class="headerlink" title="å¯¹åº”çš„motionä¿¡æ¯ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦æˆ–è€…æ—‹è½¬é€Ÿåº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä»è¿™ä¸‰ä¸ªæˆå‘˜å˜é‡ä¸­å¾—åˆ°ã€‚"></a>å¯¹åº”çš„motionä¿¡æ¯ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦æˆ–è€…æ—‹è½¬é€Ÿåº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä»è¿™ä¸‰ä¸ªæˆå‘˜å˜é‡ä¸­å¾—åˆ°ã€‚</h4><p></p>
<h4 id="æœ€åæ˜¯å¤„ç†åäº‹ï¼Œå°±æ˜¯åœ¨ä½ ä¸éœ€è¦Core-Motionè¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œé‡Šæ”¾èµ„æº"><a href="#æœ€åæ˜¯å¤„ç†åäº‹ï¼Œå°±æ˜¯åœ¨ä½ ä¸éœ€è¦Core-Motionè¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œé‡Šæ”¾èµ„æº" class="headerlink" title="æœ€åæ˜¯å¤„ç†åäº‹ï¼Œå°±æ˜¯åœ¨ä½ ä¸éœ€è¦Core Motionè¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œé‡Šæ”¾èµ„æº"></a>æœ€åæ˜¯å¤„ç†åäº‹ï¼Œå°±æ˜¯åœ¨ä½ ä¸éœ€è¦Core Motionè¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œé‡Šæ”¾èµ„æº</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[motionManager stopAccelerometerUpdates];  </span><br><span class="line">//[motionManager stopGyroUpdates];  </span><br><span class="line">//[motionManager stopDeviceMotionUpdates];  </span><br><span class="line">[motionManager release];</span><br></pre></td></tr></table></figure>
<p> <br></p>
<h3 id="å½“ç„¶äº†-çœ‹åˆ°ä¸Šé¢çš„ä¸€å †ä»£ç -æˆ‘ä»¬çš„å¤´éƒ½å¤§äº†ğŸ˜­ğŸ˜­ğŸ˜­-å¥½åœ¨ä»Šå¤©ä¸Šé¢åªæ˜¯ä½œä¸ºåŸç†æ¥è®²è®²çš„-è€Œä»Šå¤©æˆ‘ä»¬è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°è®¡æ­¥çš„æ•ˆæœ-è¿™ä¸ªæ˜¯åœ¨iOS8-0ç‰ˆæœ¬å‡ºç°ä¹‹åå‡ºç°çš„-è¿™ä¸ªç±»æ˜¯è‹¹æœå®˜æ–¹å°è£…å¥½çš„ä¸¤ä¸ªç±»-CMPedometerå’ŒCMPedometerData-ä½¿æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½æ›´å®¹æ˜“å®ç°"><a href="#å½“ç„¶äº†-çœ‹åˆ°ä¸Šé¢çš„ä¸€å †ä»£ç -æˆ‘ä»¬çš„å¤´éƒ½å¤§äº†ğŸ˜­ğŸ˜­ğŸ˜­-å¥½åœ¨ä»Šå¤©ä¸Šé¢åªæ˜¯ä½œä¸ºåŸç†æ¥è®²è®²çš„-è€Œä»Šå¤©æˆ‘ä»¬è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°è®¡æ­¥çš„æ•ˆæœ-è¿™ä¸ªæ˜¯åœ¨iOS8-0ç‰ˆæœ¬å‡ºç°ä¹‹åå‡ºç°çš„-è¿™ä¸ªç±»æ˜¯è‹¹æœå®˜æ–¹å°è£…å¥½çš„ä¸¤ä¸ªç±»-CMPedometerå’ŒCMPedometerData-ä½¿æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½æ›´å®¹æ˜“å®ç°" class="headerlink" title="å½“ç„¶äº†,çœ‹åˆ°ä¸Šé¢çš„ä¸€å †ä»£ç ,æˆ‘ä»¬çš„å¤´éƒ½å¤§äº†ğŸ˜­ğŸ˜­ğŸ˜­,å¥½åœ¨ä»Šå¤©ä¸Šé¢åªæ˜¯ä½œä¸ºåŸç†æ¥è®²è®²çš„,è€Œä»Šå¤©æˆ‘ä»¬è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°è®¡æ­¥çš„æ•ˆæœ,è¿™ä¸ªæ˜¯åœ¨iOS8.0ç‰ˆæœ¬å‡ºç°ä¹‹åå‡ºç°çš„,è¿™ä¸ªç±»æ˜¯è‹¹æœå®˜æ–¹å°è£…å¥½çš„ä¸¤ä¸ªç±» CMPedometerå’ŒCMPedometerData,ä½¿æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½æ›´å®¹æ˜“å®ç°."></a>å½“ç„¶äº†,çœ‹åˆ°ä¸Šé¢çš„ä¸€å †ä»£ç ,æˆ‘ä»¬çš„å¤´éƒ½å¤§äº†ğŸ˜­ğŸ˜­ğŸ˜­,å¥½åœ¨ä»Šå¤©ä¸Šé¢åªæ˜¯ä½œä¸ºåŸç†æ¥è®²è®²çš„,è€Œä»Šå¤©æˆ‘ä»¬è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°è®¡æ­¥çš„æ•ˆæœ,è¿™ä¸ªæ˜¯åœ¨iOS8.0ç‰ˆæœ¬å‡ºç°ä¹‹åå‡ºç°çš„,è¿™ä¸ªç±»æ˜¯è‹¹æœå®˜æ–¹å°è£…å¥½çš„ä¸¤ä¸ªç±» CMPedometerå’ŒCMPedometerData,ä½¿æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½æ›´å®¹æ˜“å®ç°.</h3><p> </p>
<hr>
<h3 id="ç‚¹å‡»è®¡å…¥CMPedometerè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚"><a href="#ç‚¹å‡»è®¡å…¥CMPedometerè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚" class="headerlink" title="ç‚¹å‡»è®¡å…¥CMPedometerè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚"></a><a href="https://developer.apple.com/library/prerelease/ios/documentation/CoreMotion/Reference/CMPedometer_class/" target="_blank" rel="external">ç‚¹å‡»è®¡å…¥CMPedometerè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚</a></h3><h3 id="ç‚¹å‡»è®¡å…¥CMPedometerDataè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚"><a href="#ç‚¹å‡»è®¡å…¥CMPedometerDataè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚" class="headerlink" title="ç‚¹å‡»è®¡å…¥CMPedometerDataè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚"></a><a href="https://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMPedometerData_class/index.html" target="_blank" rel="external">ç‚¹å‡»è®¡å…¥CMPedometerDataè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚</a></h3><hr>
<p><br></p>
<h2 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h2><p></p>
<h4 id="é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„åº“CoreMotion-framework"><a href="#é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„åº“CoreMotion-framework" class="headerlink" title="é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„åº“CoreMotion.framework"></a>é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„åº“CoreMotion.framework</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;CoreMotion/CoreMotion.h&gt;</span><br></pre></td></tr></table></figure>
<h4 id="ç„¶å-æˆ‘ä»¬éœ€è¦åˆ›å»ºCMMotionManagerä¸€ä¸ªå¯¹è±¡-æ£€æµ‹è®¾å¤‡ä¸Šæ˜¯å¦å…·æœ‰é™€èºä»ªå’ŒåŠ é€Ÿå™¨"><a href="#ç„¶å-æˆ‘ä»¬éœ€è¦åˆ›å»ºCMMotionManagerä¸€ä¸ªå¯¹è±¡-æ£€æµ‹è®¾å¤‡ä¸Šæ˜¯å¦å…·æœ‰é™€èºä»ªå’ŒåŠ é€Ÿå™¨" class="headerlink" title="ç„¶å,æˆ‘ä»¬éœ€è¦åˆ›å»ºCMMotionManagerä¸€ä¸ªå¯¹è±¡,æ£€æµ‹è®¾å¤‡ä¸Šæ˜¯å¦å…·æœ‰é™€èºä»ªå’ŒåŠ é€Ÿå™¨"></a>ç„¶å,æˆ‘ä»¬éœ€è¦åˆ›å»ºCMMotionManagerä¸€ä¸ªå¯¹è±¡,æ£€æµ‹è®¾å¤‡ä¸Šæ˜¯å¦å…·æœ‰é™€èºä»ªå’ŒåŠ é€Ÿå™¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">     CMMotionManager * motionManager = [[CMMotionManager alloc] init];</span><br><span class="line"></span><br><span class="line">if (!_motionManager.accelerometerAvailable) &#123;</span><br><span class="line">        // fail code // æ£€æŸ¥ä¼ æ„Ÿå™¨åˆ°åº•åœ¨è®¾å¤‡ä¸Šæ˜¯å¦å¯ç”¨</span><br><span class="line">        tipWithMessage(@&quot;é™€èºä»ªä¸å¯ç”¨!&quot;);</span><br><span class="line">        </span><br><span class="line">        return;</span><br><span class="line"></span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    </span><br><span class="line">//è¿›è¡Œæ“ä½œ</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="PS-ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„å®å¼¹çª—-å¤§å®¶æœ‰éœ€è¦å¯ä»¥ç›´æ¥æ‹·è´è¿‡å»"><a href="#PS-ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„å®å¼¹çª—-å¤§å®¶æœ‰éœ€è¦å¯ä»¥ç›´æ¥æ‹·è´è¿‡å»" class="headerlink" title="PS:ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„å®å¼¹çª—,å¤§å®¶æœ‰éœ€è¦å¯ä»¥ç›´æ¥æ‹·è´è¿‡å»"></a>PS:ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„å®å¼¹çª—,å¤§å®¶æœ‰éœ€è¦å¯ä»¥ç›´æ¥æ‹·è´è¿‡å»</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  è‡ªå®šä¹‰å®å¼¹çª—</span><br><span class="line"> *</span><br><span class="line"> *  @param string æƒ³è¦åœ¨å¼¹çª—ä¸­æ˜¾ç¤ºçš„æ–‡å­—</span><br><span class="line"> */</span><br><span class="line">NS_INLINE void tipWithMessage(NSString *message)&#123;</span><br><span class="line">    </span><br><span class="line">    dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        </span><br><span class="line">        UIAlertView *alerView = [[UIAlertView alloc] initWithTitle:@&quot;æç¤º&quot; message:message delegate:nil cancelButtonTitle:nil otherButtonTitles:nil, nil];</span><br><span class="line">        </span><br><span class="line">        [alerView show];</span><br><span class="line">        </span><br><span class="line">        [alerView performSelector:@selector(dismissWithClickedButtonIndex:animated:) withObject:@[@0, @1] afterDelay:0.9];</span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å½“æ²¡æœ‰ä»»ä½•é”™è¯¯å-æˆ‘ä»¬å°±è¦åˆ›å»ºCMPedometerç±»-å¹¶å®ç°ä»–çš„ä¸€ä¸ªæ–¹æ³•-ä¸€èˆ¬æˆ‘ä»¬éƒ½è¦æŠŠCMPedometerç±»çš„å¯¹è±¡å£°æ˜ç§°å±æ€§"><a href="#å½“æ²¡æœ‰ä»»ä½•é”™è¯¯å-æˆ‘ä»¬å°±è¦åˆ›å»ºCMPedometerç±»-å¹¶å®ç°ä»–çš„ä¸€ä¸ªæ–¹æ³•-ä¸€èˆ¬æˆ‘ä»¬éƒ½è¦æŠŠCMPedometerç±»çš„å¯¹è±¡å£°æ˜ç§°å±æ€§" class="headerlink" title="å½“æ²¡æœ‰ä»»ä½•é”™è¯¯å,æˆ‘ä»¬å°±è¦åˆ›å»ºCMPedometerç±»,å¹¶å®ç°ä»–çš„ä¸€ä¸ªæ–¹æ³•,ä¸€èˆ¬æˆ‘ä»¬éƒ½è¦æŠŠCMPedometerç±»çš„å¯¹è±¡å£°æ˜ç§°å±æ€§,"></a>å½“æ²¡æœ‰ä»»ä½•é”™è¯¯å,æˆ‘ä»¬å°±è¦åˆ›å»ºCMPedometerç±»,å¹¶å®ç°ä»–çš„ä¸€ä¸ªæ–¹æ³•,ä¸€èˆ¬æˆ‘ä»¬éƒ½è¦æŠŠCMPedometerç±»çš„å¯¹è±¡å£°æ˜ç§°å±æ€§,</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@property(nonatomic,strong)CMPedometer *pedometer;</span><br></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–pedometerå¯¹è±¡"><a href="#åˆå§‹åŒ–pedometerå¯¹è±¡" class="headerlink" title="åˆå§‹åŒ–pedometerå¯¹è±¡"></a>åˆå§‹åŒ–pedometerå¯¹è±¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_pedometer = [[CMPedometer alloc]init];</span><br></pre></td></tr></table></figure>
<h4 id="ç„¶å-æˆ‘ä»¬è¦è°ƒç”¨pedometer-çš„queryPedometerDataFromDateæ–¹æ³•-åœ¨blockä¸­å®ç°æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½"><a href="#ç„¶å-æˆ‘ä»¬è¦è°ƒç”¨pedometer-çš„queryPedometerDataFromDateæ–¹æ³•-åœ¨blockä¸­å®ç°æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½" class="headerlink" title="ç„¶å,æˆ‘ä»¬è¦è°ƒç”¨pedometer çš„queryPedometerDataFromDateæ–¹æ³•,åœ¨blockä¸­å®ç°æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½"></a>ç„¶å,æˆ‘ä»¬è¦è°ƒç”¨pedometer çš„queryPedometerDataFromDateæ–¹æ³•,åœ¨blockä¸­å®ç°æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[_pedometer queryPedometerDataFromDate:[NSDate dateWithTimeIntervalSince1970:100] toDate:[NSDate date] withHandler:^(CMPedometerData * _Nullable pedometerData, NSError * _Nullable error) &#123;</span><br><span class="line">        </span><br><span class="line">        if (!error) &#123;</span><br><span class="line">            </span><br><span class="line">            NSLog(@&quot;è¿™æ®µæ—¶é—´å†…èµ°è¿‡çš„è·ç¦»ä¸º%@&quot;,pedometerData.distance);</span><br><span class="line">            </span><br><span class="line">            NSLog(@&quot;è¿™æ®µæ—¶é—´å†…èµ°è¿‡çš„æ­¥æ•°ä¸º%@&quot;,pedometerData.numberOfSteps);</span><br><span class="line">            </span><br><span class="line">            NSLog(@&quot;è¿™æ®µæ—¶é—´å†…ä¸Šæ¥¼çš„è¿‘ä¼¼å°é˜¶æ•°ä¸º%@&quot;,pedometerData.floorsAscended);</span><br><span class="line">            </span><br><span class="line">            NSLog(@&quot;è¿™æ®µæ—¶é—´å†…ä¸‹æ¥¼çš„è¿‘ä¼¼å°é˜¶æ•°ä¸º%@&quot;,pedometerData.floorsDescended);</span><br><span class="line">            </span><br><span class="line">        &#125;else&#123;</span><br><span class="line">        </span><br><span class="line">            tipWithMessage([NSString stringWithFormat:@&quot;é”™è¯¯ä¿¡æ¯ç¼–å·ä¸º%@&quot;,error]);</span><br><span class="line">           </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="æ³¨æ„-distance-numberOfSteps-floorsAscended-floorsDescendedä¸ºnilçš„æ—¶å€™è¡¨ç¤ºè¿™ä¸ªè®¾å¤‡ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½-è¿˜æ˜¯ä¸¤ä¸ªæ—¶é—´NSDate-ä¸€ä¸ªå¼€å§‹æ—¶é—´-ä¸€ä¸ªç»“æŸæ—¶é—´-éœ€è¦å¤§å®¶è‡ªè¡Œè·å–"><a href="#æ³¨æ„-distance-numberOfSteps-floorsAscended-floorsDescendedä¸ºnilçš„æ—¶å€™è¡¨ç¤ºè¿™ä¸ªè®¾å¤‡ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½-è¿˜æ˜¯ä¸¤ä¸ªæ—¶é—´NSDate-ä¸€ä¸ªå¼€å§‹æ—¶é—´-ä¸€ä¸ªç»“æŸæ—¶é—´-éœ€è¦å¤§å®¶è‡ªè¡Œè·å–" class="headerlink" title="æ³¨æ„:distance,numberOfSteps,floorsAscended,floorsDescendedä¸ºnilçš„æ—¶å€™è¡¨ç¤ºè¿™ä¸ªè®¾å¤‡ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½.è¿˜æ˜¯ä¸¤ä¸ªæ—¶é—´NSDate (ä¸€ä¸ªå¼€å§‹æ—¶é—´,ä¸€ä¸ªç»“æŸæ—¶é—´)éœ€è¦å¤§å®¶è‡ªè¡Œè·å–."></a>æ³¨æ„:distance,numberOfSteps,floorsAscended,floorsDescendedä¸ºnilçš„æ—¶å€™è¡¨ç¤ºè¿™ä¸ªè®¾å¤‡ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½.è¿˜æ˜¯ä¸¤ä¸ªæ—¶é—´NSDate (ä¸€ä¸ªå¼€å§‹æ—¶é—´,ä¸€ä¸ªç»“æŸæ—¶é—´)éœ€è¦å¤§å®¶è‡ªè¡Œè·å–.</h4></blockquote>
<h4 id="å„ä½çœ‹å®˜å–œæ¬¢çš„è¯-å°±ç‚¹ä¸ªå–œæ¬¢å§-ä¸æ±‚æ‰“èµ-åªæ±‚å–œæ¬¢"><a href="#å„ä½çœ‹å®˜å–œæ¬¢çš„è¯-å°±ç‚¹ä¸ªå–œæ¬¢å§-ä¸æ±‚æ‰“èµ-åªæ±‚å–œæ¬¢" class="headerlink" title="å„ä½çœ‹å®˜å–œæ¬¢çš„è¯,å°±ç‚¹ä¸ªå–œæ¬¢å§,ä¸æ±‚æ‰“èµ,åªæ±‚å–œæ¬¢."></a>å„ä½çœ‹å®˜å–œæ¬¢çš„è¯,å°±ç‚¹ä¸ªå–œæ¬¢å§,ä¸æ±‚æ‰“èµ,åªæ±‚å–œæ¬¢.</h4><p><br></p>
<h4 id="å‚è€ƒ-http-blog-csdn-net-u011439689-article-details-49865811-å’Œ-http-justsee-iteye-com-blog-1933099"><a href="#å‚è€ƒ-http-blog-csdn-net-u011439689-article-details-49865811-å’Œ-http-justsee-iteye-com-blog-1933099" class="headerlink" title="å‚è€ƒ:http://blog.csdn.net/u011439689/article/details/49865811 å’Œ http://justsee.iteye.com/blog/1933099"></a>å‚è€ƒ:<a href="http://blog.csdn.net/u011439689/article/details/49865811" target="_blank" rel="external">http://blog.csdn.net/u011439689/article/details/49865811</a> å’Œ <a href="http://justsee.iteye.com/blog/1933099" target="_blank" rel="external">http://justsee.iteye.com/blog/1933099</a></h4>
      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/11/20/åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSç½‘ç»œè¯·æ±‚ç»ˆç»“è€…-ç½‘ç»œçŠ¶å†µç›‘æ§ç»ˆç»“è€…-AFNetworking/" rel="next" title="åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSç½‘ç»œè¯·æ±‚ç»ˆç»“è€…/ç½‘ç»œçŠ¶å†µç›‘æ§ç»ˆç»“è€…--AFNetworking">
                <i class="fa fa-chevron-left"></i> åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSç½‘ç»œè¯·æ±‚ç»ˆç»“è€…/ç½‘ç»œçŠ¶å†µç›‘æ§ç»ˆç»“è€…--AFNetworking
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/01/03/åå±±è®ºå‰‘ä¹‹iOSé’¥åŒ™ä¸²åŠMD5åŠ å¯†æŠ€æœ¯/" rel="prev" title="åå±±è®ºå‰‘ä¹‹iOSé’¥åŒ™ä¸²åŠMD5åŠ å¯†æŠ€æœ¯">
                åå±±è®ºå‰‘ä¹‹iOSé’¥åŒ™ä¸²åŠMD5åŠ å¯†æŠ€æœ¯ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="ç¥ç»éªšæ ‹" />
          <p class="site-author-name" itemprop="name">ç¥ç»éªšæ ‹</p>
          <p class="site-description motion-element" itemprop="description">åˆ«æŒ½ç•™åˆ«å‹‰å¼ºæ›´åˆ«å°†å°±</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">29</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>
          
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/users/e39da354ce50/latest_articles" target="_blank">
                  
                    <i class="fa fa-globe"></i> github
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#å†™ä»£ç -æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯”"><span class="nav-number">1.</span> <span class="nav-text">å†™ä»£ç ,æ˜¯ä¸ºäº†èƒ½è£…ä¸€èˆ¬äººè£…ä¸äº†çš„æ¯” .</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç°åœ¨çš„Appåº”ç”¨æœ€ç«çš„æ˜¯ä»€ä¹ˆ-åº—é“ºç±»çš„Appæ˜¯æœ€ç«çš„-ç„¶åå°±æ˜¯è¿åŠ¨å¥åº·-ä»Šå¤©æˆ‘å°±å¯¹è¿åŠ¨è®¡æ­¥è¿™ä¸€æ¨¡å—è¿›è¡Œåˆæ¬¡çš„å°è¯•"><span class="nav-number">2.</span> <span class="nav-text">ç°åœ¨çš„Appåº”ç”¨æœ€ç«çš„æ˜¯ä»€ä¹ˆ? åº—é“ºç±»çš„Appæ˜¯æœ€ç«çš„,ç„¶åå°±æ˜¯è¿åŠ¨å¥åº·,ä»Šå¤©æˆ‘å°±å¯¹è¿åŠ¨è®¡æ­¥è¿™ä¸€æ¨¡å—è¿›è¡Œåˆæ¬¡çš„å°è¯•.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è®¡æ­¥çš„æ—¶å€™-å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹åŠ é€Ÿè®¡å’Œé™€èºä»ªè¿™ä¸¤ä¸ªç¥å¥‡çš„ä¸œè¥¿-æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è°ƒç”¨åŠ é€Ÿè®¡å’Œé™€èºä»ªæ¥è¿›è¡Œæˆ‘ä»¬çš„è®¡æ­¥æ“ä½œ-CoreMotionæ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†Motionçš„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªï¼Œåœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±UIAccelerometerç±»æ¥è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ç”¨CoreMotionæ¥å¤„ç†åŠ é€Ÿåº¦è¿‡ç¨‹"><span class="nav-number">3.</span> <span class="nav-text">å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è®¡æ­¥çš„æ—¶å€™,å°±ä¸å¾—ä¸è¯´ä¸€ä¸‹åŠ é€Ÿè®¡å’Œé™€èºä»ªè¿™ä¸¤ä¸ªç¥å¥‡çš„ä¸œè¥¿,æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯è°ƒç”¨åŠ é€Ÿè®¡å’Œé™€èºä»ªæ¥è¿›è¡Œæˆ‘ä»¬çš„è®¡æ­¥æ“ä½œ.CoreMotionæ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†Motionçš„æ¡†æ¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†åŠ é€Ÿåº¦è®¡å’Œé™€èºä»ªï¼Œåœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±UIAccelerometerç±»æ¥è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œç°åœ¨ä¸€èˆ¬éƒ½æ˜¯ç”¨CoreMotionæ¥å¤„ç†åŠ é€Ÿåº¦è¿‡ç¨‹.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åŠ é€Ÿè®¡"><span class="nav-number">4.</span> <span class="nav-text">åŠ é€Ÿè®¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Core-Motionçš„å¤§ä½“ä»‹ç»å°±æ˜¯è¿™äº›ã€‚ä¸‹é¢è¯´è¯´Core-Motionå…·ä½“è´Ÿè´£çš„é‡‡é›†ï¼Œè®¡ç®—å’Œå¤„ç†ã€‚Core-Motionçš„ä½¿ç”¨å°±æ˜¯ä¸€ä¸‰éƒ¨æ›²ï¼šåˆå§‹åŒ–ï¼Œè·å–æ•°æ®ï¼Œå¤„ç†åäº‹ã€‚"><span class="nav-number">5.</span> <span class="nav-text">Core Motionçš„å¤§ä½“ä»‹ç»å°±æ˜¯è¿™äº›ã€‚ä¸‹é¢è¯´è¯´Core Motionå…·ä½“è´Ÿè´£çš„é‡‡é›†ï¼Œè®¡ç®—å’Œå¤„ç†ã€‚Core Motionçš„ä½¿ç”¨å°±æ˜¯ä¸€ä¸‰éƒ¨æ›²ï¼šåˆå§‹åŒ–ï¼Œè·å–æ•°æ®ï¼Œå¤„ç†åäº‹ã€‚</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸ç®¡ä½ è¦è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯"><span class="nav-number">6.</span> <span class="nav-text">åœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œä¸ç®¡ä½ è¦è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šç”±è¿™ä¸ªmanageræ¥ç®¡ã€‚åé¢çš„åˆå§‹åŒ–æ“ä½œç›¸å½“ç›´è§‚ï¼Œä»¥åŠ é€Ÿåº¦çš„pullæ–¹å¼ä¸ºä¾‹"><span class="nav-number">7.</span> <span class="nav-text">æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šç”±è¿™ä¸ªmanageræ¥ç®¡ã€‚åé¢çš„åˆå§‹åŒ–æ“ä½œç›¸å½“ç›´è§‚ï¼Œä»¥åŠ é€Ÿåº¦çš„pullæ–¹å¼ä¸ºä¾‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¦‚æœæ˜¯pushæ–¹å¼ï¼Œæ›´æ–°çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·"><span class="nav-number">8.</span> <span class="nav-text">å¦‚æœæ˜¯pushæ–¹å¼ï¼Œæ›´æ–°çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¥ä¸‹æ¥å°±æ˜¯è·å–æ•°æ®äº†ã€‚Againï¼Œå¾ˆç®€å•çš„ä»£ç "><span class="nav-number">9.</span> <span class="nav-text">æ¥ä¸‹æ¥å°±æ˜¯è·å–æ•°æ®äº†ã€‚Againï¼Œå¾ˆç®€å•çš„ä»£ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¯¹åº”çš„motionä¿¡æ¯ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦æˆ–è€…æ—‹è½¬é€Ÿåº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä»è¿™ä¸‰ä¸ªæˆå‘˜å˜é‡ä¸­å¾—åˆ°ã€‚"><span class="nav-number">10.</span> <span class="nav-text">å¯¹åº”çš„motionä¿¡æ¯ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦æˆ–è€…æ—‹è½¬é€Ÿåº¦ï¼Œå°±å¯ä»¥ç›´æ¥ä»è¿™ä¸‰ä¸ªæˆå‘˜å˜é‡ä¸­å¾—åˆ°ã€‚</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æœ€åæ˜¯å¤„ç†åäº‹ï¼Œå°±æ˜¯åœ¨ä½ ä¸éœ€è¦Core-Motionè¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œé‡Šæ”¾èµ„æº"><span class="nav-number">11.</span> <span class="nav-text">æœ€åæ˜¯å¤„ç†åäº‹ï¼Œå°±æ˜¯åœ¨ä½ ä¸éœ€è¦Core Motionè¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œé‡Šæ”¾èµ„æº</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å½“ç„¶äº†-çœ‹åˆ°ä¸Šé¢çš„ä¸€å †ä»£ç -æˆ‘ä»¬çš„å¤´éƒ½å¤§äº†ğŸ˜­ğŸ˜­ğŸ˜­-å¥½åœ¨ä»Šå¤©ä¸Šé¢åªæ˜¯ä½œä¸ºåŸç†æ¥è®²è®²çš„-è€Œä»Šå¤©æˆ‘ä»¬è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°è®¡æ­¥çš„æ•ˆæœ-è¿™ä¸ªæ˜¯åœ¨iOS8-0ç‰ˆæœ¬å‡ºç°ä¹‹åå‡ºç°çš„-è¿™ä¸ªç±»æ˜¯è‹¹æœå®˜æ–¹å°è£…å¥½çš„ä¸¤ä¸ªç±»-CMPedometerå’ŒCMPedometerData-ä½¿æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½æ›´å®¹æ˜“å®ç°"><span class="nav-number"></span> <span class="nav-text">å½“ç„¶äº†,çœ‹åˆ°ä¸Šé¢çš„ä¸€å †ä»£ç ,æˆ‘ä»¬çš„å¤´éƒ½å¤§äº†ğŸ˜­ğŸ˜­ğŸ˜­,å¥½åœ¨ä»Šå¤©ä¸Šé¢åªæ˜¯ä½œä¸ºåŸç†æ¥è®²è®²çš„,è€Œä»Šå¤©æˆ‘ä»¬è¦ä½¿ç”¨åˆ°ä¸€ä¸ªæ–°çš„ç±»æ¥å®ç°è®¡æ­¥çš„æ•ˆæœ,è¿™ä¸ªæ˜¯åœ¨iOS8.0ç‰ˆæœ¬å‡ºç°ä¹‹åå‡ºç°çš„,è¿™ä¸ªç±»æ˜¯è‹¹æœå®˜æ–¹å°è£…å¥½çš„ä¸¤ä¸ªç±» CMPedometerå’ŒCMPedometerData,ä½¿æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½æ›´å®¹æ˜“å®ç°.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç‚¹å‡»è®¡å…¥CMPedometerè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚"><span class="nav-number"></span> <span class="nav-text">ç‚¹å‡»è®¡å…¥CMPedometerè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç‚¹å‡»è®¡å…¥CMPedometerDataè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚"><span class="nav-number"></span> <span class="nav-text">ç‚¹å‡»è®¡å…¥CMPedometerDataè‹¹æœå®˜æ–¹æ–‡æ¡£ğŸ˜‚</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å®ç°æ­¥éª¤"><span class="nav-number"></span> <span class="nav-text">å®ç°æ­¥éª¤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„åº“CoreMotion-framework"><span class="nav-number">1.</span> <span class="nav-text">é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥æˆ‘ä»¬æ‰€éœ€è¦çš„åº“CoreMotion.framework</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç„¶å-æˆ‘ä»¬éœ€è¦åˆ›å»ºCMMotionManagerä¸€ä¸ªå¯¹è±¡-æ£€æµ‹è®¾å¤‡ä¸Šæ˜¯å¦å…·æœ‰é™€èºä»ªå’ŒåŠ é€Ÿå™¨"><span class="nav-number">2.</span> <span class="nav-text">ç„¶å,æˆ‘ä»¬éœ€è¦åˆ›å»ºCMMotionManagerä¸€ä¸ªå¯¹è±¡,æ£€æµ‹è®¾å¤‡ä¸Šæ˜¯å¦å…·æœ‰é™€èºä»ªå’ŒåŠ é€Ÿå™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PS-ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„å®å¼¹çª—-å¤§å®¶æœ‰éœ€è¦å¯ä»¥ç›´æ¥æ‹·è´è¿‡å»"><span class="nav-number">3.</span> <span class="nav-text">PS:ä¸‹é¢æ˜¯è‡ªå®šä¹‰çš„å®å¼¹çª—,å¤§å®¶æœ‰éœ€è¦å¯ä»¥ç›´æ¥æ‹·è´è¿‡å»</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å½“æ²¡æœ‰ä»»ä½•é”™è¯¯å-æˆ‘ä»¬å°±è¦åˆ›å»ºCMPedometerç±»-å¹¶å®ç°ä»–çš„ä¸€ä¸ªæ–¹æ³•-ä¸€èˆ¬æˆ‘ä»¬éƒ½è¦æŠŠCMPedometerç±»çš„å¯¹è±¡å£°æ˜ç§°å±æ€§"><span class="nav-number">4.</span> <span class="nav-text">å½“æ²¡æœ‰ä»»ä½•é”™è¯¯å,æˆ‘ä»¬å°±è¦åˆ›å»ºCMPedometerç±»,å¹¶å®ç°ä»–çš„ä¸€ä¸ªæ–¹æ³•,ä¸€èˆ¬æˆ‘ä»¬éƒ½è¦æŠŠCMPedometerç±»çš„å¯¹è±¡å£°æ˜ç§°å±æ€§,</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åˆå§‹åŒ–pedometerå¯¹è±¡"><span class="nav-number">5.</span> <span class="nav-text">åˆå§‹åŒ–pedometerå¯¹è±¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç„¶å-æˆ‘ä»¬è¦è°ƒç”¨pedometer-çš„queryPedometerDataFromDateæ–¹æ³•-åœ¨blockä¸­å®ç°æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½"><span class="nav-number">6.</span> <span class="nav-text">ç„¶å,æˆ‘ä»¬è¦è°ƒç”¨pedometer çš„queryPedometerDataFromDateæ–¹æ³•,åœ¨blockä¸­å®ç°æˆ‘ä»¬çš„è®¡æ­¥åŠŸèƒ½</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ³¨æ„-distance-numberOfSteps-floorsAscended-floorsDescendedä¸ºnilçš„æ—¶å€™è¡¨ç¤ºè¿™ä¸ªè®¾å¤‡ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½-è¿˜æ˜¯ä¸¤ä¸ªæ—¶é—´NSDate-ä¸€ä¸ªå¼€å§‹æ—¶é—´-ä¸€ä¸ªç»“æŸæ—¶é—´-éœ€è¦å¤§å®¶è‡ªè¡Œè·å–"><span class="nav-number">7.</span> <span class="nav-text">æ³¨æ„:distance,numberOfSteps,floorsAscended,floorsDescendedä¸ºnilçš„æ—¶å€™è¡¨ç¤ºè¿™ä¸ªè®¾å¤‡ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½.è¿˜æ˜¯ä¸¤ä¸ªæ—¶é—´NSDate (ä¸€ä¸ªå¼€å§‹æ—¶é—´,ä¸€ä¸ªç»“æŸæ—¶é—´)éœ€è¦å¤§å®¶è‡ªè¡Œè·å–.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å„ä½çœ‹å®˜å–œæ¬¢çš„è¯-å°±ç‚¹ä¸ªå–œæ¬¢å§-ä¸æ±‚æ‰“èµ-åªæ±‚å–œæ¬¢"><span class="nav-number">8.</span> <span class="nav-text">å„ä½çœ‹å®˜å–œæ¬¢çš„è¯,å°±ç‚¹ä¸ªå–œæ¬¢å§,ä¸æ±‚æ‰“èµ,åªæ±‚å–œæ¬¢.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‚è€ƒ-http-blog-csdn-net-u011439689-article-details-49865811-å’Œ-http-justsee-iteye-com-blog-1933099"><span class="nav-number">9.</span> <span class="nav-text">å‚è€ƒ:http://blog.csdn.net/u011439689/article/details/49865811 å’Œ http://justsee.iteye.com/blog/1933099</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç¥ç»éªšæ ‹</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.scheme !== 'Pisces' && (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always')) {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
